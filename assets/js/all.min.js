var k=function(){var e=[];return{h:function(b,a){var c=b.querySelector("span.items-count");if(c){var d=b.getAttribute("data-feed-id"),e=b.querySelector("h2:first-of-type");e.className="loading-icon";var p=new XMLHttpRequest;p.onload=function(){e.className="";b.removeAttribute("data-feed-error");var d=b.querySelector(".feed-last-checked");d&&(d.innerHTML=d.getAttribute("data-after-update"));d=JSON.parse(this.responseText);d.result?c.innerHTML=d.items_count.items_unread+"/"+d.items_count.items_total:
b.setAttribute("data-feed-error","1");a?a(d):g.a()};p.open("POST","?action=refresh-feed&feed_id="+d,!0);p.send()}},i:function(){var b=Array.prototype.slice.call(document.querySelectorAll("article:not([data-feed-disabled])")),a=setInterval(function(){for(;0<b.length&&5>e.length;){var c=b.shift();e.push(parseInt(c.getAttribute("data-feed-id"),10));k.h(c,function(c){c=e.indexOf(c.feed_id);0<=c&&e.splice(c,1);0===b.length&&0===e.length&&(clearInterval(a),g.a())})}},100)},F:function(b){b=b.srcElement;
var a=b.getAttribute("data-value");-1<b.className.indexOf("active")?(b.classList.remove("active"),document.getElementById("form-"+b.id).value=""):(b.classList.add("active"),document.getElementById("form-"+b.id).value=a)},j:function(){var b=prompt("Please enter the title for the new tag","News");if(b){var a=new XMLHttpRequest,b="title="+b;a.onload=function(){console.log(this.responseText);this.responseText&&document.getElementById("tags").insertAdjacentHTML("beforeend",this.responseText)};a.open("POST",
"?action=tag-create",!0);a.setRequestHeader("Content-type","application/x-www-form-urlencoded");a.send(b)}}}}(),g=function(){function e(a){var f=document.createEvent("MouseEvents");f.initEvent("mousedown",!0,!0);a.dispatchEvent(f);f=document.createEvent("MouseEvents");f.initEvent("mouseup",!0,!0);a.dispatchEvent(f);a.click()}function b(a){return item_id=a.getAttribute("data-item-id")}function a(a){if(a&&a.hasAttribute("data-reverse-label")){var f=a.innerHTML;a.innerHTML=a.getAttribute("data-reverse-label");
a.setAttribute("data-reverse-label",f)}}function c(h){if("read"!==h.getAttribute("data-item-status")){if(h.getAttribute("data-hide"))d(h);else{h.setAttribute("data-item-status","read");var f=h.querySelector("a.mark");a(f);(h=h.querySelector("a.mark"))&&h.setAttribute("data-action","mark-unread")}l--}}function d(a){"mouse"!==m.c&&q.d();a.parentNode.removeChild(a);t--}function n(){-1<window.location.href.indexOf("nothing_to_read=1")&&0<l?window.location.href="?action=unread":0===t&&window.location.reload();
var a=document.getElementById("page-counter");a&&(a.textContent=t||"");document.getElementById("nav-counter").textContent=l||"";var f=document.querySelector("div.page-header h2:first-of-type");if(f)pageHeading=f.firstChild.nodeValue;else if(f=document.querySelector("article.item h1:first-of-type")){document.title=f.textContent;return}switch(document.querySelector("section.page").getAttribute("data-item-page")){case "unread":document.title="Miniflux ("+l+")";break;case "feed-items":document.title=
"("+t+") "+pageHeading;break;default:document.title=a?pageHeading+" ("+t+")":pageHeading}}function p(a){var f=b(a),d=new XMLHttpRequest;d.onload=function(){q.b()&&(c(a),n())};d.open("POST","?action=mark-item-read&id="+f,!0);d.send()}function w(h){var f=b(h),c=new XMLHttpRequest;c.onload=function(){if(q.b()){if("unread"!==h.getAttribute("data-item-status")){if(h.getAttribute("data-hide"))d(h);else{h.setAttribute("data-item-status","unread");var c=h.querySelector("a.mark");a(c);(c=h.querySelector("a.mark"))&&
c.setAttribute("data-action","mark-read")}l++}n()}};c.open("POST","?action=mark-item-unread&id="+f,!0);c.send()}var v=[],u=!1,l=function(){var a=document.getElementById("nav-counter");if(a)return counter=parseInt(a.textContent,10)||0}(),t=function(){var a=document.getElementById("page-counter");if(a)return counter=parseInt(a.textContent,10)||0}();return{o:p,q:w,p:function(a){var c=b(a),r=new XMLHttpRequest;r.onload=function(){q.b()&&(d(a),"unread"===a.getAttribute("data-item-status")&&l--,n())};r.open("POST",
"?action=mark-item-removed&id="+c,!0);r.send()},g:function(c){var f=b(c),r="1"===c.getAttribute("data-item-bookmark")?"0":"1",e=new XMLHttpRequest;e.onload=function(){var b=document.querySelector("section.page");if(q.b()&&"bookmarks"===b.getAttribute("data-item-page"))d(c),n();else if(c.setAttribute("data-item-bookmark",r),q.b())b=c.querySelector("a.bookmark"),a(b);else if((b=c.querySelector("a.bookmark-icon"))&&b.hasAttribute("data-reverse-title")){var f=b.getAttribute("title");b.setAttribute("title",
b.getAttribute("data-reverse-title"));b.setAttribute("data-reverse-title",f)}};e.open("POST","?action=bookmark&id="+f+"&value="+r,!0);e.send()},C:function(a){var c=a.getAttribute("data-item-status");"read"===c?w(a):"unread"===c&&p(a)},A:function(a){(a=a.querySelector("a.show"))&&e(a)},u:function(a){(a=a.querySelector("a.original"))&&e(a)},e:function(a){var c=document.getElementById("download-item");if(c){c.innerHTML=" "+c.getAttribute("data-before-message");c.className="loading-icon";var d=new XMLHttpRequest;
d.onload=function(){var a=JSON.parse(d.responseText);c.className="";if(a.result){var b=document.getElementById("item-content");b&&(b.innerHTML=a.content);c.innerHTML=c.getAttribute("data-after-message")}else c.innerHTML=c.getAttribute("data-failure-message")};a=b(a);d.open("POST","?action=download-item&id="+a,!0);d.send()}},s:function(a){for(var c=document.getElementsByTagName("article"),d=[],e=0,l=c.length;e<l;e++)d.push(b(c[e]));c=new XMLHttpRequest;c.onload=function(){window.location.href=a};c.open("POST",
"?action=mark-items-as-read",!0);c.send(JSON.stringify(d))},r:function(a){var b=new XMLHttpRequest;b.onload=function(){for(var a=document.getElementsByTagName("article"),b=0,d=a.length;b<d;b++)c(a[b]);l=this.responseText;n()};b.open("POST","?action=mark-feed-as-read&feed_id="+a,!0);b.send()},D:function(){for(var a=["#current-item h1","#item-content","#listing #current-item h2","#listing #current-item .preview"],c=0;c<a.length;c++){var b=document.querySelector(a[c]);b&&(b.dir=""==b.dir?"rtl":"")}},
G:function(){return u},a:function(){if(!document.hidden||!u){var a=new XMLHttpRequest;a.onload=function(){var a=0===v.length,c=!1,b=JSON.parse(this.responseText),d;for(d in b.feeds){var e=b.feeds[d];if(!v.hasOwnProperty(d)||e.time>v[d])v[d]=e.time,"unread"===e.status&&(c=!0)}document.hidden||b.nbUnread===l&&!u?document.hidden&&!a&&c&&(u=!0,document.title="\u21bb "+document.title):(u=!1,l=b.nbUnread,n())};a.open("POST","?action=latest-feeds-items",!0);a.send()}}}}(),m=function(){function e(a){if(63!==
a.keyCode&&63!==a.which&&(a.ctrlKey||a.shiftKey||a.altKey||a.metaKey))return!0;a=a.target||a.srcElement;return"INPUT"===a.tagName||"TEXTAREA"===a.tagName?!0:!1}var b=[];return{c:"",m:function(){document.onclick=function(a){a.target.hasAttribute("data-action")&&"original"!==a.target.className&&a.preventDefault()};document.onmouseup=function(a){if(2!==a.button)if("INPUT"===a.target.nodeName&&"auto-select"===a.target.className)a.target.select();else{var c=a.target.getAttribute("data-action");if(c){m.c=
"mouse";var b;a:{for(element=a.target;element&&element.parentNode;)if(element=element.parentNode,element.tagName&&"article"===element.tagName.toLowerCase()){b=element;break a}b=void 0}switch(c){case "refresh-all":k.i();break;case "refresh-feed":b&&k.h(b);break;case "mark-read":b&&g.o(b);break;case "mark-unread":b&&g.q(b);break;case "mark-removed":b&&g.p(b);break;case "bookmark":b&&g.g(b);break;case "download-item":b&&g.e(b);break;case "mark-all-read":g.s("?action=unread");break;case "mark-feed-read":g.r(a.target.getAttribute("data-feed-id"));
break;case "toggle-tag":k.F(a);break;case "add-tag":k.j(a)}}}}},l:function(){document.onkeypress=function(a){if(!e(a))if(m.c="keyboard",b.push(a.key||a.which),"g"===b[0]||103===b[0])switch(b[1]){case void 0:break;case "u":case 117:window.location.href="?action=unread";b=[];break;case "b":case 98:window.location.href="?action=bookmarks";b=[];break;case "h":case 104:window.location.href="?action=history";b=[];break;case "s":case 115:window.location.href="?action=feeds";b=[];break;case "p":case 112:window.location.href=
"?action=config";b=[];break;default:b=[]}else{b=[];var c=document.getElementById("current-item");switch(a.key||a.which){case "d":case 100:c&&g.e(c);break;case "p":case 112:case "k":case 107:q.f();break;case "n":case 110:case "j":case 106:q.d();break;case "v":case 118:c&&g.u(c);break;case "o":case 111:c&&g.A(c);break;case "m":case 109:c&&g.C(c);break;case "f":case 102:c&&g.g(c);break;case "h":case 104:q.v();break;case "l":case 108:q.t();break;case "r":case 114:k.i();break;case "?":case 63:q.B();break;
case "z":case 122:g.D()}}};document.onkeydown=function(a){if(!e(a))switch(m.c="keyboard",a.key||a.which){case "ArrowLeft":case "Left":case 37:q.f();break;case "ArrowRight":case "Right":case 39:q.d()}}},n:function(){document.addEventListener("visibilitychange",function(){!document.hidden&&g.G()&&g.a()})}}}(),q=function(){function e(a){var b=pageYOffset+document.documentElement.clientHeight;(0>b-(a.offsetTop+a.offsetHeight)||b-a.offsetTop>document.documentElement.clientHeight)&&window.scrollTo(0,a.offsetTop-
10)}function b(){return document.getElementById("listing")?!0:!1}return{t:function(){var a=document.getElementById("next-page");a&&a.click()},v:function(){var a=document.getElementById("previous-page");a&&a.click()},d:function(){var a=document.getElementById("next-item");if(a)a.click();else if(b())if(a=document.getElementsByTagName("article"),document.getElementById("current-item"))for(var c=0,d=a.length;c<d;c++){if("current-item"===a[c].id){c+1<d&&(a[c].id="item-"+a[c].getAttribute("data-item-id"),
a[c+1].id="current-item",e(a[c+1]));break}}else a[0].id="current-item",e(a[0])},f:function(){var a=document.getElementById("previous-item");if(a)a.click();else if(b())if(a=document.getElementsByTagName("article"),document.getElementById("current-item"))for(var c=a.length-1;0<=c;c--){if("current-item"===a[c].id){0<=c-1&&(a[c].id="item-"+a[c].getAttribute("data-item-id"),a[c-1].id="current-item",e(a[c-1]));break}}else a[a.length-1].id="current-item",e(a[a.length-1])},B:function(){open("?action=show-help",
"Help","width=320,height=450,location=no,scrollbars=no,status=no,toolbar=no")},b:b}}();({H:function(){},w:function(){m.l();m.m();m.n();this.k()},k:function(){var e=new XMLHttpRequest;e.onload=function(){var b=JSON.parse(this.responseText);0<b.frontend_updatecheck_interval&&(g.a(),setInterval(function(){g.a()},6E4*b.frontend_updatecheck_interval))};e.open("POST","?action=get-config",!0);e.send(JSON.stringify(["frontend_updatecheck_interval"]))}}).w();